@page
@model MyEshop_Phone.Pages.Admin.Color.DeleteModel
@{
    ViewBag.Title = "حذف رنگ ها";
}
<br />
<p>
    <a asp-page="Add" class="btn btn-success">رنگ جدید</a>
</p>
@Html.AntiForgeryToken()
<table class="table">
    <thead>
        <tr>
            <th>رنگ</th>
            <th></th>
        </tr>
    </thead>
    <tbody>
        @foreach (var item in Model.DeleteColor)
        {
            <tr id="color-@item.Id">
                <td style="background-color:@item.Name;width: 50px;height: 50px;border-radius: 50%;"></td>
                <td>
                    <button class="btn btn-danger" onclick="deleteColor(@item.Id)">
                        حذف
                    </button>
                </td>
            </tr>
        }
    </tbody>
</table>

@section Scripts {
    <script>
        function deleteColor(id){
            if(!confirm("آیا مطمئن هستید؟")) return;

            $.ajax({
                type:'POST',
                url: '/Admin/Color/Delete?handler=Delete',
                data:{
                    colorId:id,
                     __RequestVerificationToken: $('input[name="__RequestVerificationToken"]').val()
                },
                success: function (res) {
                    if (res.success) {
                        alert("حذف باموفقیت انجام شد!");
                        location.reload();
                    }
                },
                error: function (xhr) {
                    console.log(xhr.responseText);
                    alert("خطا در حذف");
                }
            });
        }
    </script>
}